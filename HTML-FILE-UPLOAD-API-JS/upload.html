<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <select name= "resumeOrigins" multiple>
        <option value = "India" title = "India">Indian Resumes</option>
        <option value = "USA" title = "USA">USA Resumes</option>
        <option value = "Russia" title = "Russia">Russian Resumes</option>
    </select>
    <br>
    <div>
        <label>Private</label>
        <input type="radio" id="private" value = "private" name="privacy" onclick="radiohandle()">
        <label>Public</label>
        <input type="radio" id="public" value = "public" name="privacy" onclick="radiohandle()">
    </div>

    <input type="text" value="" placeholder="this should not be blank" required>
    <input type="text" value="" placeholder="this should not be blank" required>
    <input type="text" value="" placeholder="this should not be blank" required>
    <input type="text" value="" placeholder="this should not be blank" required autofocus>
    <form> 
        <br>
        <label title="PIN NUMBER"> Search Your Country </label>
        <input id="mysearch" type="search">
    </form>
    <section>

        <input type="hidden" id="dheeraj" value="good guy">


        <select name="resumeOrigins"  size="5" multiple>
            <option value="India" title="India">Indian Resumes</option>
            <option value="USA" title="USA">USA Resumes</option>
            <option value="Russia" title="Russia">Russia Resumes</option>
        </select>

        <div>
            <label>Public</label> <input type="radio" name="Public" value="public" >
            <label>Private</label> <input type="radio" name="Private" value="private" >
        </div>


        <input type="text" value="" placeholder="this should not be left blank" required >
        <input type="text" value="" placeholder="this should not be left blank" required >
        <input type="text" value="" placeholder="this should not be left blank" required >
        <input type="text" value="" placeholder="this should not be left blank" required autofocus>
         <form>
            <br>
            <label title="PIN NUMER">Search Your Country</label>
            <input type="text" placeholder="PIN NUMBER" list="countryList">

            <label id="rangeValue"> The Data  </label> <input type="range" name="range" id="range" onchange="handleRange(this)">


            <datalist id="countryList"
            >
                <option>USA</option>
                <option>UAE</option>
                <option>aaaa</option>
                <option>bbbb</option>
            </datalist>
            <br>
            <input type="submit">
         </form>
        <input type="file" name="resumeUpload" id="uploader">
        <input type="submit" value="Upload" name="btnUpload" id="btnUpload" onclick="uploadFile()">
    </section>

    <div style="align-content: center;">
    <section  style="width:50%">
        <caption>All Uploaded Files</caption>
        <table border="2">
            <thead>
                <td>Sr No</td>
                <td>File Name </td>
                <td>Server Path</td>
                <td>Download</td>
            </thead>
            <tbody id="tbody">

            </tbody>

        </table>

    </section>
</div>

    <section>
        <label for="meeting1" >Please select the date of meeting </label>

        <input type="date" id="meeting">
        <input type="datetime" id="meeting1">
    </section>

    <script>
        function uploadFile() {

            var inputFile = document.getElementById("uploader");
            console.log(inputFile);
            var formdata = new FormData();
            formdata.append("file", inputFile.files[0]);

            var requestOptions = {
                method: 'POST',
                body: formdata,
                redirect: 'follow'
            };

            fetch("http://localhost:8080/api/uploadfile", requestOptions)
                .then(response => response.text())
                .then(result => {
                    alert("The Operation ")
                    alert(result)
                    var requestOptions = {
                        method: 'GET',
                        redirect: 'follow'
                    };
                        let tbody= document.getElementById("tbody");
                    fetch("http://localhost:8080/api/viewAllFiles", requestOptions)
                        .then(response => response.json())
                        .then(result => {

                            console.log("The Rsult "+ result)

                            for (let  i=0; i < result.length; i++){
                                let splitLine = result[i].split('|')
                                let row = document.createElement("tr");
                                let srNo = document.createElement("td");
                                srNo.innerText=(i+1)
                                let fileName = document.createElement("td");
                                fileName.innerText= splitLine[0]//result[i]
                                let serverPath = document.createElement("td");
                                serverPath.innerText= splitLine[1]
                                let download = document.createElement("td");
                                download.innerHTML= document.createElement("a").text= splitLine[0];

                                row.append(srNo)
                                row.append(fileName)
                                row.append(serverPath)
                                row.append(download)
                                tbody.append(row)
                            }
                        })
                        .catch(error => console.log('error', error));
                }
                )
                .catch(error => console.log('error', error));
        }
    </script>
</body>

</html>
